{% extends "base.html" %} {% block title %}Kelola User{% endblock %} {% block
content %}
<div class="max-w-7xl mx-auto px-4 py-6">
  <h1 class="text-3xl font-bold mb-6 text-gray-800">ğŸ‘¤ Manajemen Pengguna</h1>

  <!-- Tombol Kembali ke Dashboard -->
  <div class="flex justify-between items-center mb-6">
    <a
      href="{{ url_for('admin.admin_dashboard') }}"
      class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg shadow transition"
    >
      â† Kembali ke Dashboard
    </a>
  </div>

  <!-- Form Tambah User -->
  <div class="bg-white p-6 rounded-lg shadow mb-8">
    <h2 class="text-xl font-semibold mb-4 text-gray-700">
      â• Tambah User Baru
    </h2>
    <form
      action="{{ url_for('admin.add_user') }}"
      method="POST"
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"
    >
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
      <div>
        <label for="username" class="block text-gray-700 mb-1">Username</label>
        <input
          type="text"
          name="username"
          id="username"
          class="border border-gray-300 rounded-lg w-full p-2"
          required
        />
      </div>
      <div>
        <label for="email" class="block text-gray-700 mb-1">Email</label>
        <input
          type="email"
          name="email"
          id="email"
          class="border border-gray-300 rounded-lg w-full p-2"
          required
        />
      </div>
      <div>
        <label for="password" class="block text-gray-700 mb-1">Password</label>
        <input
          type="password"
          name="password"
          id="password"
          class="border border-gray-300 rounded-lg w-full p-2"
          required
        />
      </div>
      <div>
        <label for="role" class="block text-gray-700 mb-1">Role</label>
        <select
          name="role"
          id="role"
          class="border border-gray-300 rounded-lg w-full p-2"
          required
        >
          <option value="user">User</option>
          <option value="staff">Staff</option>
          <option value="admin">Admin</option>
        </select>
      </div>
      <div class="md:col-span-2 lg:col-span-4 flex justify-end">
        <button
          class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg shadow"
        >
          Tambah User
        </button>
      </div>
    </form>
  </div>

  <!-- Tabel Daftar User -->
  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-xl font-semibold mb-4 text-gray-700">
      ğŸ“„ Daftar Pengguna Sistem
    </h2>
    <div class="overflow-x-auto">
      <table
        class="min-w-full text-sm text-left text-gray-700 border border-gray-200"
      >
        <thead class="bg-gray-100">
          <tr>
            <th class="px-4 py-2 border">ID</th>
            <th class="px-4 py-2 border">Username</th>
            <th class="px-4 py-2 border">Email</th>
            <th class="px-4 py-2 border">Role</th>
            <th class="px-4 py-2 border">Terverifikasi</th>
            <th class="px-4 py-2 border text-center">Aksi</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr class="border-t hover:bg-gray-50">
            <td class="px-4 py-2 border">{{ user.id }}</td>
            <td class="px-4 py-2 border font-medium">{{ user.username }}</td>
            <td class="px-4 py-2 border">{{ user.email }}</td>
            <td class="px-4 py-2 border">
              <span
                class="relative inline-block px-3 py-1 font-semibold leading-tight {% if user.role == 'admin' %} text-red-900 bg-red-200 {% elif user.role == 'staff' %} text-green-900 bg-green-200 {% else %} text-blue-900 bg-blue-200 {% endif %} rounded-full"
              >
                <span class="relative">{{ user.role | capitalize }}</span>
              </span>
            </td>
            <td class="px-4 py-2 border text-center">
              {% if user.is_verified %}
              <span class="text-green-600 font-bold">âœ“ Ya</span>
              {% else %}
              <span class="text-red-600 font-bold">âœ— Tidak</span>
              {% endif %}
            </td>
            <td class="px-4 py-2 border text-center">
              <form
                action="{{ url_for('admin.delete_user', id=user.id) }}"
                method="POST"
                onsubmit="return confirm('Apakah Anda yakin ingin menghapus user ini?');"
              >
                <input
                  type="hidden"
                  name="csrf_token"
                  value="{{ csrf_token() }}"
                />
                <button
                  type="submit"
                  class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded"
                >
                  Hapus
                </button>
              </form>
            </td>
          </tr>
          {% else %}
          <tr>
            <td colspan="6" class="text-center py-4 text-gray-500">
              Belum ada user terdaftar.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
